function connection_test($){var r=".rpw-section-database-connection";$(r).on("click","#rpw_test_database",(function(e){e.preventDefault();var t=$(r+" input").serialize(),o=$("#rpw_database_test_message");$.ajax({type:"POST",url:rpwObject.ajaxurl,data:{action:"rpw_test_prestashop_connection",security:$("#rpw_form_import").find("#_wpnonce").val(),form_data:t},success:function(r){o.html(r)},error:function(r,e){error_report(r,e)}})}))}function get_categories($){var r=".rpw-import-body",e='<img class="loader rvo-inline-icon" src="'+rpwObject.loaderURL+'">';$(r).on("click","#rpw_import_categories",(function(t){t.preventDefault(t),(r=$(this).closest(r)).append('<div class="rpw-overlay">'+e+"</div>"),$.ajax({type:"POST",url:rpwObject.ajaxurl,data:{action:"rpw_get_product_categories",security:$("#rpw_form_import").find("#_wpnonce").val()},success:function(e){var t=e>1?" Categories":" Category";$(r).append('<div class="message">'+e+t+" Found</div>")},error:function(r,e){error_report(r,e)}})}))}function get_import_data($){var r=".rpw-section-import-data",e='<img class="loader rvo-inline-icon" src="'+rpwObject.loaderURL+'">';$(r).on("click",".button",(function(t){t.preventDefault(t);var o=$(this).attr("id");(r=$(this).closest(".rpw-import-body")).append('<div class="rpw-overlay">'+e+"</div>"),console.log(get_action(o)),$.ajax({type:"POST",url:rpwObject.ajaxurl,data:{action:get_action(o),security:$("#rpw_form_import").find("#_wpnonce").val()},success:function(e){$(r).append('<div class="message">'+e+"</div>"),r.find(".rpw-overlay").remove()},error:function(r,e){error_report(r,e)}})}))}function get_action(r){var e="";switch(r){case"rpw_import_categories":e="rpw_get_product_categories";break;case"rpw_import_products":e="rpw_get_the_products";break;case"rpw_import_users":e="rpw_get_the_users";break;case"rpw_import_orders":e="rpw_get_the_orders";break;default:e=""}return e}function error_report(r,e){0===r.status?alert("Not connect.\n Verify Network."):404==r.status?alert("Requested page not found. [404]"):500==r.status?alert("Internal Server Error [500]."):"parsererror"===e?alert("Requested JSON parse failed."):"timeout"===e?alert("Time out error."):"abort"===e?alert("Ajax request aborted."):alert("Uncaught Error.\n"+r.responseText)}!function($){$(document).ready((function(){connection_test($),get_import_data($)}))}(jQuery);